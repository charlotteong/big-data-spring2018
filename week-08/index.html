<!DOCTYPE html>
<html lang="en">
<head>
  <title>Learning D3</title>
  <meta charset="utf-8">
  <script src="https://d3js.org/d3.v4.js" charset="utf-8"></script>
  <!-- script: this is like import command in python. need to pay attention to which version you are bringing in.
        load in older versions as necessary. don't load in multiple versions. create multiple viz,
        each viz will have its own page/js file/html file. cannot run multiple versions of d3 on the same file -->
</head>

<!-- 40, 90, 30, 60 -->
<body>
  <!--
  <svg width="160" height="160">
    <rect x="30" width="20" height="40" fill="steelblue"></rect>

    <rect x="55" width="20" height="90" fill="steelblue"></rect>
    <rect x="80" width="20" height="30" fill="steelblue"></rect>
    <rect x="105" width="20" height="60" fill="steelblue"></rect>
  </svg>
-->

  <!-- script - will run as javascript
        javascript functions look like: function name (param1 , param2) {};
      indentation in javascript: meaningless - just do it for readability
      js is ; delimited - add one to the end of every statement -->
  <script>
    var ratData = [40,90,30,60];
    console.log(d3.selectAll("rect"))

    var w = 150;
    var h = 175;

    var svg = d3.select("body")
    //this only selects one object, in this case the body text.
    // to the end of this object append svg and set width and height elements
      .append("svg")
      .attr("width", w)
      .attr("height", h);

    //select all rectangles in our page
    svg.selectAll("rect")
      // bind ratData to rectangles
      .data(ratData)
      // enter() gives instructions to create additional elements, including attributes before
      .enter()
      .append("rect")
      // i corresponds to index position. space elements dynamically
      .attr("x", function(d,i) {
        return i*25 + 30;
      })

      // to make the bar charts line up on the bottom since positions are taken from the top-left corner
      .attr("y", function(d) {
        return h - d;
      })
      .attr("width", 20)
      .attr("height", 100)
      .attr("fill", "steelblue");

      svg.append("line")
        .attr("x1",30)
        .attr("y1",75)
        .attr("x2",30)
        .attr("y2",175)
        .attr("stroke-width",2)
        .attr("stroke","black");

      svg.append("line")
          .attr("x1",30)
          .attr("y1",175)
          .attr("x2",130)
          .attr("y2",175)
          .attr("stroke-width",2)
          .attr("stroke","black");

      svg.append("text")
        .attr("class","y label")
        .attr("text-anchor", "end")
        .text("No. of Rats")
        .attr("transform", "translate(20,20), rotate(-90)")
      //this rotates the text, moves the text x and y direction by 20 px

      // set height based on value of array at iterator position
      //function d is an anonymous function
      //d3 uses method-chaining --> .method .method etc.
      //.attr("height", function (d) {
      //   console.log(d);
      //   return d;
      // });

  </script>

</body>
</html>
